# Serverless ä» 0 åˆ° 1 å®æˆ˜æ•™ç¨‹

> é¢å‘å¯¹è±¡ï¼šåç«¯å·¥ç¨‹å¸ˆ / DevOps / è¿ç»´è½¬å‹
>
> ç›®æ ‡ï¼š**ç†è§£ Serverless æœ¬è´¨ï¼Œèƒ½ç‹¬ç«‹éƒ¨ç½²ä¸€ä¸ªå¯ç”¨çš„ Serverless åº”ç”¨ï¼Œå¹¶ç”¨äºçœŸå®é¡¹ç›®**

------

## ä¸€ã€ä»€ä¹ˆæ˜¯ Serverlessï¼ˆå…ˆåˆ«æ€¥ç€ä¸Šä»£ç ï¼‰

### 1.1 Serverless â‰  æ²¡æœ‰æœåŠ¡å™¨

Serverless çš„æ ¸å¿ƒä¸æ˜¯â€œæ²¡æœ‰æœåŠ¡å™¨â€ï¼Œè€Œæ˜¯ï¼š

> **ä½ ä¸å†å…³å¿ƒæœåŠ¡å™¨çš„éƒ¨ç½²ã€æ‰©å®¹ã€è¿ç»´ï¼Œåªå…³æ³¨ä¸šåŠ¡ä»£ç æœ¬èº«**

æœåŠ¡å™¨ä¾ç„¶å­˜åœ¨ï¼Œåªæ˜¯ï¼š

- ç”±äº‘å‚å•†æ‰˜ç®¡
- è‡ªåŠ¨æ‰©ç¼©å®¹
- æŒ‰è°ƒç”¨è®¡è´¹

------

### 1.2 Serverless è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

ä¼ ç»Ÿæ¶æ„ç—›ç‚¹ï¼š

- è¦ä¹°æœåŠ¡å™¨ / é…ç½®ç¯å¢ƒ
- è¦åšé«˜å³°æ‰©å®¹
- æœåŠ¡é—²æ—¶æµªè´¹èµ„æº
- è¿ç»´æˆæœ¬é«˜

Serverless å¸¦æ¥çš„æ”¹å˜ï¼š

- ğŸš€ **é›¶è¿ç»´æˆ–æä½è¿ç»´**
- ğŸ’° **æŒ‰å®é™…è°ƒç”¨ä»˜è´¹**
- âš¡ **å¤©ç„¶å¼¹æ€§æ‰©ç¼©å®¹**
- ğŸ”¥ **éå¸¸é€‚åˆäº‹ä»¶é©±åŠ¨ä¸šåŠ¡**

------

## äºŒã€Serverless æ ¸å¿ƒç»„æˆ

ä¸€ä¸ªå®Œæ•´çš„ Serverless æ¶æ„é€šå¸¸åŒ…æ‹¬ï¼š

```text
äº‹ä»¶æº â†’ å‡½æ•°è®¡ç®—ï¼ˆFaaSï¼‰ â†’ äº‘æœåŠ¡
```

### 2.1 FaaSï¼ˆFunction as a Serviceï¼‰

- AWS Lambda
- é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— FC
- è…¾è®¯äº‘ SCF
- Azure Functions

ç‰¹ç‚¹ï¼š

- å•å‡½æ•°æ‰§è¡Œ
- æœ‰è¶…æ—¶æ—¶é—´ï¼ˆå¦‚ 3~15 åˆ†é’Ÿï¼‰
- æ— çŠ¶æ€ï¼ˆçŠ¶æ€éœ€å¤–ç½®ï¼‰

------

### 2.2 BaaSï¼ˆBackend as a Serviceï¼‰

Serverless å¹¶ä¸æ˜¯åªæœ‰å‡½æ•°ï¼š

- äº‘æ•°æ®åº“ï¼ˆRDS / DynamoDBï¼‰
- å¯¹è±¡å­˜å‚¨ï¼ˆOSS / S3ï¼‰
- æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆSQS / Kafkaï¼‰
- API ç½‘å…³

ğŸ‘‰ **Serverless = FaaS + BaaS**

------

## ä¸‰ã€Serverless é€‚åˆ & ä¸é€‚åˆçš„åœºæ™¯

### 3.1 éå¸¸é€‚åˆ

- API æ¥å£æœåŠ¡
- Webhook
- å®šæ—¶ä»»åŠ¡
- å›¾ç‰‡ / æ–‡ä»¶å¤„ç†
- æ•°æ®æ¸…æ´—
- æµé‡æ³¢åŠ¨å¤§çš„ä¸šåŠ¡

### 3.2 ä¸é€‚åˆ

- é•¿æ—¶é—´è¿è¡ŒæœåŠ¡
- é«˜å¹¶å‘ä½å»¶è¿Ÿï¼ˆæè‡´æ€§èƒ½ï¼‰
- å¼ºçŠ¶æ€æœåŠ¡
- éœ€è¦æŒç»­è¿æ¥ï¼ˆå¦‚ IMï¼‰

------

## å››ã€Serverless æ¶æ„ç¤ºæ„ï¼ˆç»å…¸ï¼‰

```text
ç”¨æˆ·è¯·æ±‚
   â†“
API Gateway
   â†“
Lambda / FC
   â†“
æ•°æ®åº“ / OSS / MQ
```

------

## äº”ã€å®æˆ˜ä¸€ï¼šç¬¬ä¸€ä¸ª Serverless HTTP æ¥å£

ä¸‹é¢ä»¥ **Node.js å‡½æ•°** ä¸ºä¾‹ï¼ˆé€»è¾‘é€šç”¨ï¼‰

### 5.1 å‡½æ•°ä»£ç ï¼ˆhello worldï¼‰

```js
exports.handler = async (event) => {
  return {
    statusCode: 200,
    body: JSON.stringify({
      message: "Hello Serverless",
      event
    })
  }
}
```

------

### 5.2 ç»‘å®š API ç½‘å…³

æ­¥éª¤æ€è·¯ï¼ˆé€šç”¨ï¼‰ï¼š

1. åˆ›å»ºå‡½æ•°
2. é€‰æ‹©è¿è¡Œç¯å¢ƒï¼ˆNode / Python / Goï¼‰
3. ç»‘å®š HTTP è§¦å‘å™¨
4. é…ç½®è·¯å¾„ `/hello`
5. å‘å¸ƒ

è®¿é—®ï¼š

```text
https://xxx.cloudprovider.com/hello
```

------

## å…­ã€å®æˆ˜äºŒï¼šServerless + æ•°æ®åº“

### 6.1 æ¶æ„

```text
API Gateway â†’ Function â†’ DB
```

### 6.2 ç¤ºä¾‹ï¼ˆNode.js æŸ¥è¯¢æ•°æ®åº“ï¼‰

```js
const mysql = require('mysql2/promise')

exports.handler = async () => {
  const conn = await mysql.createConnection({
    host: process.env.DB_HOST,
    user: process.env.DB_USER,
    password: process.env.DB_PASS,
    database: 'test'
  })

  const [rows] = await conn.execute('select 1')
  return rows
}
```

ğŸ‘‰ **æ³¨æ„**ï¼š

- ä½¿ç”¨ç¯å¢ƒå˜é‡
- æ•°æ®åº“è¿æ¥éœ€ä¼˜åŒ–ï¼ˆè¿æ¥å¤ç”¨ï¼‰

------

## ä¸ƒã€Serverless çš„å…³é”®é—®é¢˜ï¼ˆå¿…é¡»æ‡‚ï¼‰

### 7.1 å†·å¯åŠ¨ï¼ˆCold Startï¼‰

ä»€ä¹ˆæ˜¯å†·å¯åŠ¨ï¼Ÿ

- å‡½æ•°é•¿æ—¶é—´æœªè°ƒç”¨
- äº‘å‚å•†éœ€é‡æ–°åˆå§‹åŒ–è¿è¡Œç¯å¢ƒ

è§£å†³æ€è·¯ï¼š

- ä¿æŒå®šæ—¶è§¦å‘
- å‡å°‘ä¾èµ–ä½“ç§¯
- é€‰æ‹©åˆé€‚è¿è¡Œæ—¶

------

### 7.2 æ— çŠ¶æ€è®¾è®¡

é”™è¯¯åšæ³•ï¼š

```text
åœ¨å‡½æ•°å†…ä¿å­˜å…¨å±€çŠ¶æ€
```

æ­£ç¡®åšæ³•ï¼š

- æ•°æ®åº“å­˜çŠ¶æ€
- Redis
- å¯¹è±¡å­˜å‚¨

------

## å…«ã€Serverless + DevOpsï¼ˆé‡ç‚¹ï¼‰

### 8.1 åŸºç¡€å‘å¸ƒæµç¨‹

```text
Git Push
  â†“
CIï¼ˆæµ‹è¯• / æ„å»ºï¼‰
  â†“
Serverless Deploy
```

### 8.2 å¸¸è§å·¥å…·

- Serverless Framework
- AWS SAM
- Terraform
- äº‘å‚å•† CLI

------

## ä¹ã€å®æˆ˜ä¸‰ï¼šä½¿ç”¨ Serverless Framework

### 9.1 åˆå§‹åŒ–é¡¹ç›®

```bash
npm install -g serverless
serverless create --template aws-nodejs
```

### 9.2 é…ç½® serverless.yml

```yaml
service: demo
provider:
  name: aws
  runtime: nodejs18.x
functions:
  hello:
    handler: handler.handler
    events:
      - http:
          path: hello
          method: get
```

### 9.3 ä¸€é”®éƒ¨ç½²

```bash
serverless deploy
```

------

## åã€Serverless ä¸ Docker / K8s çš„åŒºåˆ«

| ç»´åº¦ | Serverless | Docker | Kubernetes |
| ---- | ---------- | ------ | ---------- |
| è¿ç»´ | å‡ ä¹æ—      | å°‘     | å¤š         |
| æˆæœ¬ | æŒ‰è°ƒç”¨     | æŒ‰èµ„æº | æŒ‰é›†ç¾¤     |
| ä¸Šæ‰‹ | ç®€å•       | ä¸­     | å¤æ‚       |

ğŸ‘‰ **ç»“è®º**ï¼š

- Serverless é€‚åˆè½»é‡ã€äº‹ä»¶é©±åŠ¨
- K8s é€‚åˆå¤æ‚ã€é•¿æœŸè¿è¡ŒæœåŠ¡

------

## åä¸€ã€ç”Ÿäº§çº§æœ€ä½³å®è·µ

- æ§åˆ¶å‡½æ•°è¶…æ—¶
- æ—¥å¿—å¿…é¡»å®Œå–„
- æƒé™æœ€å°åŒ–
- é¿å…å‡½æ•°è¿‡å¤§
- ç›‘æ§è°ƒç”¨æ¬¡æ•° & è´¹ç”¨

------

## åäºŒã€å­¦ä¹ è·¯çº¿å»ºè®®ï¼ˆéå¸¸é‡è¦ï¼‰

```text
Linux / ç½‘ç»œ
   â†“
äº‘æœåŠ¡åŸºç¡€
   â†“
Serverless
   â†“
CI/CD
   â†“
äº‘åŸç”Ÿæ¶æ„
```

------

## ç»“è¯­

**Serverless æ˜¯ DevOps çš„ä¸€æ¬¡â€œå‡è´Ÿé©å‘½â€ï¼Œ
è®©å·¥ç¨‹å¸ˆæŠŠæ—¶é—´èŠ±åœ¨ä¸šåŠ¡ï¼Œè€Œä¸æ˜¯æœåŠ¡å™¨ä¸Šã€‚**

å¦‚æœä½ éœ€è¦ï¼š

- ğŸ‘‰ Serverless é¢è¯•é¢˜
- ğŸ‘‰ Serverless + Go / Java å®æˆ˜
- ğŸ‘‰ Serverless æˆæœ¬æ§åˆ¶ä¸çœŸå®è´¦å•åˆ†æ
- ğŸ‘‰ æ•™å­¦ç”¨ PPT / è¯¾ç¨‹å¤§çº²

å¯ä»¥ç»§ç»­æ‰¾æˆ‘ ğŸ‘¨â€ğŸ’»